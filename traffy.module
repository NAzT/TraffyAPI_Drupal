<?php

  function traffy_menu() {

    $items['traffy/test/%'] = array(
        'title' => 'Traffy API CCTV testing',
        'description' => 'Testing traffy CCTV api on drupal7',
        'page callback' => 'test_api',
        'page arguments' => array(2),
        'file' => 'traffy.test.inc',
        'access arguments' => array('access content'),
        'type' => MENU_CALLBACK,
    );

   /* 
    $items['traffy/wrapper/%'] = array( 
        'title' => 'Traffy API CCTV testing',
        'description' => 'Testing traffy CCTV api on drupal7',
        'page callback' => 'api_wrapper',
        'page arguments' => array(2),
        'access arguments' => array('access content'),
        'type' => MENU_CALLBACK,
    );
    */
      
    $items['admin/traffy/settings'] = array(
        'title' => 'Traffy API configuration',
        'description' => 'Testing traffy api with drupal7',
        'page callback' => 'drupal_get_form',
        'page arguments' => array('traffy_admin_settings'),
        'access arguments' => array('administer site configuration'),
        'file' => 'traffy.admin.inc',
        'menu_name' => 'traffy',
    );
   
    $items['traffy/hello'] = array(
        'title' => 'Hello Traffy API testing on Drupal7.0',
        'description' => 'Testing traffy api on Drupal7.0',
        'page callback' => 'hello_traffy',
        'access arguments' => array('access content'),
        'type' => MENU_CALLBACK,
    );
    return $items;
  }

  function hello_traffy() {
    return "Hello drupal by api traffy!";
  }

  function get_api_info() {
    $api_service = variable_get('traffy_service_url', 'http://athena.traffy.in.th/apis/apitraffy.php');
    $apikey = variable_get('traffy_apikey', '');
    $appid= variable_get('traffy_appid', '');
    $traffy = array('service' => $api_service, 
                 'apikey' => $apikey,
                 'appid' => $appid,
                );
    return $traffy; 
  }  
  function get_http_headers () {
    $host = $_SERVER['SERVER_NAME'];
    $headers = array(
        'Content-Type' => 'application/x-www-form-urlencoded; charset=utf-8',
        'Host' => $host, 
        'Referer' => 'http://'.$host,
    ); 
    return $headers;
  }

